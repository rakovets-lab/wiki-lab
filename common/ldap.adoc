= LDAP
:imagesdir: ../assets/img/common/ldap

== Abbreviations

[options="headers"]
|===
|Термин|Определение|Перевод и пояснения
|CN|Common Name|Общепринятое имя (термин служб каталогов)
|DC|Domain Component|Доменный компонент (термин служб каталогов)
|DIT|Directory Information Tree|Информационное дерево каталога (термин служб каталогов)
|DNS|Domain Name System|Система доменных имён
|DN|Distinguished Name|Уникальное имя (термин служб каталогов)
|Kerberos|Kerberos Authentication Service|Служба аутентификации Kerberos
|LDAP|Lightweight Directory Access Protocol|Облегчённый протокол доступа к службам каталогов
|UID|User Identifier|Идентификатор пользователя (термин служб каталогов)
|===

== Что такое LDAP?

LDAP - это аббревиатура от Lightweight Directory Access Protocol. Как следует из названия, это облегчённый протокол доступа к службам каталогов, предназначенный для доступа к службам каталогов на основе X.500.

=== Какого рода информация может храниться в каталоге?

Информационная модель LDAP основана на *записях* (*entry*). *Запись* - это коллекция *атрибутов* (*attribute*), обладающая *уникальным именем* (*Distinguished Name*, *DN*). *DN* глобально-уникально для всего каталога и служит для однозначного указания на запись. Каждый атрибут записи имеет свой *тип* (*type*) и одно или несколько *значений* (*value*). Обычно типы - это мнемонические строки, в которых отражено назначение атрибута, например `cn` - для *общепринятого имени* (*common name*), или `mail` - для адреса *электронной почты*. Синтаксис значений зависит от типа атрибута. Например, атрибут `cn` может содержать значение `Babs Jensen`. Атрибут `mail` может содержать значение `babs@example.com`. Атрибут `jpegPhoto` будет содержать фотографию в бинарном формате JPEG.

=== Как организовано размещение информации?

Записи каталога LDAP выстраиваются в виде иерархической древовидной структуры. Традиционно, эта структура отражает географическое и/или организационное устройство хранимых данных. В вершине дерева располагаются записи, представляющие собой страны. Под ними располагаются записи, представляющие области стран и организации. Еще ниже располагаются записи, отражающие подразделения организаций, людей, принтеры, документы, или просто всё то, что Вы захотите включить в каталог.

image::tree-catalog-traditional.png[Дерево каталога LDAP (традиционное именование записей)]

Построение дерева может быть также основано на доменных именах Internet. Этот подход к именованию
записей становится всё более популярным, поскольку позволяет обращаться к службам каталогов по аналогии с доменами DNS.

image::tree-catalog-internet.png[Дерево каталога LDAP (Internet-именование записей)]

=== Как можно обратиться к информации?

К записи обращаются по ее уникальному имени, которое состоит из собственно имени записи (так называемое *относительное уникальное имя* (*Relative Distinguished Name*, *RDN*) с прибавлением к нему имён записей-предков. Так, запись, описывающая `Barbara Jensen`, имеет *RDN* `uid=babs`, и *DN* - `uid=babs,ou=People,dc=example,dc=com`. Полное описание формата *DN* можно найти link:http://tools.ietf.org/html/rfc4514[RFC4514].

* *Какие манипуляции можно произвести с информацией?*
В LDAP определены операции для опроса и обновления каталога. К числу последних относятся операции добавления и удаления записи из каталога, изменения существующей записи и изменения названия записи. Однако, большую часть времени LDAP используется для поиска информации в каталоге. Операции поиска LDAP позволяют производить поиск записей в определённой части каталога по различным критериям, заданным поисковыми фильтрами. У каждой записи, найденной в соответствии с критериями, может быть запрошена информация, содержащаяся в её атрибутах.
К примеру, Вам захотелось найти записи о человеке по имени `Barbara Jensen` во всем подкаталоге, начиная с уровня `dc=example,dc=com` и ниже, и получить адрес электронной почты в каждой найденной записи. LDAP позволяет Вам легко это сделать. Или Вам хочется поискать непосредственно на уровне `st=California,c=US` записи организаций, названия которых содержат строку `Acme` и имеющих номер факса. Такой поиск LDAP тоже позволяет сделать.

* *Как информация защищена от несанкционированного доступа?* +
Некоторые службы каталогов не предоставляют никакой защиты, позволяя любому просматривать хранящуюся в них информацию. Однако LDAP предоставляет механизмы для аутентификации клиента, либо других способов доказательства его подлинности серверу каталогов, а также богатые возможности контроля доступа к информации, содержащейся на этом сервере. LDAP также обеспечивает защиту информации в каталоге (её целостность и конфиденциальность).

== Для чего можно использовать LDAP?

В общем случае, службу каталогов можно использовать, когда Вам требуется
надёжное хранение информации с возможностью централизованного управления и доступа к ней, с использованием стандартизированных методов.

Вот ряд (но, конечно, не полный) самых распространённых примеров промышленного использования служб каталогов:

* Идентификация компьютеров
* Аутентификация пользователей
* Группировка пользователей (в том числе системные группы)
* Адресные книги
* Представление штатно-кадровой структуры организации
* Учет закрепления имущества организации за сотрудниками
* Телефонные справочники
* Управление пользовательскими ресурсами
* Справочники адресов электронной почты
* Хранение конфигурации приложений
* и т.д. ...

Для организации каталога под столь разные задачи существуют различные, основанные на стандартах файлы наборов схемы, распространяемые с дистрибутивом. Также Вы можете создать свою собственную
спецификацию схемы для решения Вашей задачи.

Всегда найдутся новые способы использования каталогов и применения принципов LDAP для решения
различных проблем, поэтому не существует простого ответа на вопрос этого подраздела.

=== Как работает LDAP?

LDAP использует клиент-серверную модель. Один или несколько серверов LDAP содержат информацию, образующую информационное дерево каталога (directory information tree, DIT). Клиент подключается к серверу и делает запрос. В ответ сервер отправляет результаты обработки запроса и/или указатель на то, где клиент может получить дополнительные сведения (обычно, на другой сервер LDAP). Независимо от того, к какому серверу LDAP подключается клиент, он увидит одинаковое представление каталога; на записи, расположенные на одном сервере LDAP, будут указывать правильные ссылки при обращении к другому серверу LDAP, и наоборот. Это важная особенность глобальной службы каталогов.

