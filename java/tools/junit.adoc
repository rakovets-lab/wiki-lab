= JUnit

== Введение

*Тестирование* – это процесс проверки функционала программы с целью подтверждения того, что она работает в соответствии с определёнными требованиями. Unit-тестирование – это тестирование, которые пишутся, непосредственно, на уровне разработчика (тестирование определённой сущности – метод или класс). Это крайне важный этап разработки ПО, который помогает создавать качественный продукт.

*Юнит-тестирование* делится на две большие группы:

* Ручное тестирование
* Автоматизированное тестирование

[options="header"]
|===
|Ручное тестирование|Автоматизированное тестирование
|Ручное выполнение тестов без помощи каких-либо средств.|Использование специальных средств для автоматизированного тестирования
|Не программируется

Нет возможности для написания сложных тестов для тестирования сложных моделей поведения.|Программируется

Тестировщики могут написать сложные тесты для тестирования сложных моделей программирования
|Низкая надёжность

Ручное тестирование имеет низкую надёжность, так как крайне подвержено влиянию человеческого фактора.|Высокая надёжность

Автоматизированное тестирование точное и надёжное.
|Большие затраты времени

Связано с тем, что человек имеет крайне ограниченные возможность в скорости работы.|Быстро

Автоматизированные тесты выполняются на порядок быстрее, чем это может сделать человек.

|===

=== JUnit

*JUnit* – это фреймворк, разработанный для тестирования программ, написанных с использованием технологии *Java*. Он лежит в основе *TDD* (*Test-Driven Development*) и входит в семейство фрейморков для тестирования xUnit.

Главная идея данного фреймворка – “сначала тесты, потом код”. Это означает, что сначала мы определяем, что должно получиться в результате работы того или иного куска кода и пишем тесты, которые проверяют идентичность результата с требуемым, после чего пишем сам кусок кода, который и будем тестировать. Данный подход увеличивает эффективность работы разработчика и позволяет писать более стабильный код. В результате этого мы получаем меньшее количество времени, которое затрачивается на отладку программы.

=== Свойства JUnit

* Фреймворк с открытым исходным кодом, который используется для написания и выполнения тестов.
* Позволяет писать код более быстро и качественно.
* Крайне прост в использовании.
* Поддерживает аннотации для идентификации методов.
* Поддерживает утверждения для тестирования получаемых результатов.
* Тесты могут быть организованы  в связки тестов (*test suites*).
* Имеет визуальную индикацию состояния тестов (красные – не пройдены, зелёные – пройдены).

=== Тестовый случай

*Тестовый случай* (Test Case) в *юнит тестировании* – это часть кода, которая проверяет, что другая часть кода  (в частности – метод) работает в соответствии с определёнными требованиями.

Формально описанный тестовый случай характеризуется известными входными данными и ожидаемым выводом программы, который известен до начала выполнения теста.

Необходимо создавать, как минимум, два тестовых случая для каждого требования – положительный и отрицательный. Если требование имеет под требования, каждое из них должно тестироваться отдельно.

== JUnit 5

*JUnit 5* требует *Java 8* (или выше) во время выполнения. Однако вы все равно можете протестировать код, скомпилированный с предыдущими версиями *JDK*.

В отличие от предыдущих версий *JUnit*, *JUnit 5* состоит из нескольких разных модулей из трех разных подпроектов.

*JUnit 5* = *Platform JUnit* + *JUnit Jupiter* + *JUnit Vintage*

*JUnit платформа* служит основой для запуска тестирования рамок на *JVM*. Он также определяет *TestEngineAPI* для разработки инфраструктуры тестирования, работающей на платформе. Кроме того, платформа предоставляет средство запуска консоли для запуска платформы из командной строки и средство запуска на основе *JUnit 4* для запуска любого *TestEngine* на платформе в среде на основе *JUnit 4*. Первоклассная поддержка *платформы JUnit* также существует в популярных *IDE* (см. *IntelliJ IDEA*, *Eclipse*, *NetBeans* и *код Visual Studio*) и инструментах сборки (см. *Gradle*, *Maven* и *Ant*).

*JUnit Jupiter* является сочетанием новой модели программирования и модели расширения для написания тестов и расширений в *JUnit 5*. Jupiter подпроекте обеспечивает *TestEngine* для выполнения тестов на основе *Jupiter* на платформе.

*JUnit Vintage* обеспечивает *TestEngine* запуск тестов на основе *JUnit 3* и *JUnit 4* на платформе.

Получать помощь, а также задайте вопросы, связанные с *JUnit 5* можно на link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://stackoverflow.com/questions/tagged/junit5[*Stack Overflow*] или пообщайтесь с нами в link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://gitter.im/junit-team/junit5[*Gitter*].

В link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples[*junit5-samples*] репозитории размещена коллекция примеров проектов, основанных на *JUnit Jupiter*, *JUnit Vintage* и других средах тестирования. Вы найдете подходящие сценарии сборки.

* Для *Gradle* и *Java* ознакомьтесь с link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples/tree/r5.7.2/junit5-jupiter-starter-gradle[*junit5-jupiter-starter-gradle*] проектом.

* Для *Gradle* и *Kotlin* ознакомьтесь с link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples/tree/r5.7.2/junit5-jupiter-starter-gradle-kotlin[*junit5-jupiter-starter-gradle-kotlin*] проектом.

* Для *Gradle* и *Groovy* ознакомьтесь с link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples/tree/r5.7.2/junit5-jupiter-starter-gradle-groovy[*junit5-jupiter-starter-gradle-groovy*] проектом.

* Для *Maven* проверьте link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples/tree/r5.7.2/junit5-jupiter-starter-maven[*junit5-jupiter-starter-maven*] проект.

* Что касается *Ant*, ознакомьтесь с link:https://translate.google.com/website?sl=en&tl=ru&ajax=1&elem=1&se=1&u=https://github.com/junit-team/junit5-samples/tree/r5.7.2/junit5-jupiter-starter-ant[*junit5-jupiter-starter-ant*] проектом.

=== Аннотации

*JUnit Jupiter* поддерживает следующие аннотации для настройки тестов и расширения фреймворка.

|====
|Аннотация|Свойство
|`@Test`| Означает, что метод является методом тестирования. В отличие от аннотации *JUnit 4*, эта аннотация не объявляет никаких атрибутов, так как тестовые расширения в JUnit Jupiter работают на основе собственных специальных аннотаций. Такие методы наследуются, если они не переопределены.

|`@ParameterizedTest`| Означает, что метод является параметризированным тестом. Такие методы наследуются, если они не переопределены.

|`@RepeatedTest`|Означает, что метод является тестовым шаблоном для повторного теста. Такие методы наследуются, если они не переопределены.

|`@TestFactory` (*JUnit5*) |Означает, что метод является испытательным заводом для динамических тестов. Такие методы наследуются, если они не переопределены.

|`@TestTemplate`|Означает, что метод является шаблоном для тестовых случаев, предназначенных для вызова несколько раз в зависимости от количества контекстов вызова, возвращенных зарегистрированными поставщиками. Такие методы наследуются, если они не переопределены.

|`@TestMethodOrder`|Используется для настройки порядка выполнения тестового метода для аннотированного тестового класса; похож на *JUnit 4's*. Такие аннотации наследуются.

|`@TestInstance`|Используется для настройки жизненного цикла экземпляра теста для аннотированного тестового класса. Такие аннотации наследуются.

|`@DisplayName` (*JUnit5*)|Объявляет пользовательское имя дисплея для тестового класса или метода тестирования. Такие аннотации не наследуются.

|`@DisplayNameGeneration`|Объявляет пользовательский генератор имен отображения для тестового класса. Такие аннотации наследуются.

|`@BeforeEach` (*JUnit5*)|Означает, что аннотированный метод должен быть выполнен перед каждым, или методом в текущем классе; по аналогии с *JUnit 4's*. Такие методы наследуются, если они не переопределены.

|`@AfterEach` (*JUnit5*)|Означает, что аннотированный метод должен быть выполнен после каждого, или метода в текущем классе; по аналогии с *JUnit 4's*. Такие методы наследуются, если они не переопределены.

|`@BeforeAll` (*JUnit5*)|Означает, что аннотированный метод должен быть выполнен прежде всего, и методы в текущем классе; по аналогии с *JUnit 4's*. Такие методы наследуются (если они не скрыты или переопределены)и должны быть (если не используется жизненный цикл "в каждом классе" экземпляра теста).

|`@AfterAll` (*JUnit5*)|Означает, что аннотированный метод должен быть выполнен в конце концов, и методы в текущем классе; по аналогии с *JUnit 4's*. Такие методы наследуются (если они не скрыты или переопределены)и должны быть (если не используется жизненный цикл "в каждом классе" экземпляра теста).

|`@Nested` (*JUnit5*)|Означает, что аннотированный класс является нестатичным вложенным тестовым классом. и методы не могут быть использованы непосредственно в тестовом классе, если не используется жизненный цикл экземпляра теста "на класс". Такие аннотации не наследуются.

|`@Tag` (*JUnit5*)|Используется для объявления тегов для фильтрации тестов, либо на уровне класса или метода; аналогично тестовым группам в *TestNG* или *Categories* в *JUnit 4.* Такие аннотации наследуются на уровне класса, но не на уровне метода.

|`@Disabled` (*JUnit5*)|Используется для отключения тестового класса или метода тестирования; по аналогии с *JUnit 4's*. Такие аннотации не наследуются.@Ignore

|`@Timeout`|Используется для неудачи теста, испытательного завода, шаблона тестирования или метода жизненного цикла, если его выполнение превышает данный срок. Такие аннотации наследуются.

|`@ExtendWith` (*JUnit5*)|Используется для регистрации расширений декларативно. Такие аннотации наследуются.

|`@RegisterExtension`|Используется для регистрации расширений программно через поля. Такие поля наследуются, если они не затенены.

|`@TempDir`|Используется для поставки временного каталога с помощью инъекций поля или инъекций параметра в метод жизненного цикла или метод тестирования; расположен в пакете `org.junit.jupiter.api.io`
|====

Все основные аннотации находятся в link:https://junit-org.translate.goog/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/package-summary.html?_x_tr_sl=en&_x_tr_tl=ru&_x_tr_hl=ru&_x_tr_pto=ajax,elem,se[*org.junit.jupiter.api*] пакете в *junit-jupiter-api* модуле.

=== Утверждения

*JUnit 5* поставляется со многими стандартными утверждениями, которые можно найти в классе link:https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html[*org.junit.jupiter.api.Assertions*.]

Основные утверждения:

* `assertEquals()`,
* `assertArrayEquals()`,
* `assertSame()`,
* `assertNotSame()`,
* `assertTrue()`,
* `assertFalse()`,
* `assertNull()`,
* `assertNotNull()`,
* `assertLinesMatch()`,
* `assertIterablesMatch()`
