<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Spring Framework</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Spring Framework</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_spring_core">Spring Core</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Spring Framework</strong> – это framework, который облегчает и ускоряет разработку приложений на Java.</p>
</div>
<div class="paragraph">
<p>Ключевым элементом <strong>Spring Framework</strong> является <strong>Spring Container</strong>, который выполняет основные функции:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>IoC</strong> – <strong>Inversion of Control</strong> (Создание и управление объектами);</p>
</li>
<li>
<p><strong>DI</strong> – <strong>Dependency Injection</strong> (внедрение зависимостей).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Container</strong> создаёт объекты, связывает их вместе, настраивает и управляет ими от создания до момента уничтожения. Эти объекты называются <strong>Spring Bean</strong>. Beans после создания помещаются в <strong>Spring Container</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/spring-container.png" alt="spring container"></span></p>
</div>
<div class="paragraph">
<p>В <strong>Spring</strong> имеется 2 различных вида контейнеров:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>BeanFactory</strong>;</p>
</li>
<li>
<p><strong>ApplicationContext</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>BeanFactory Container</strong> самый простой контейнер, обеспечивающий базовую поддержку <strong>DI</strong> и который основан на интерфейсе <code>org.springframework.beans.factory.BeanFactory</code>. Такие интерфейсы, как <code>BeanFactoryAware</code> и <code>DisposableBean</code> всё ещё присутствуют в <strong>Spring</strong> для обеспечения обратной совместимости. Наиболее часто используемая реализация интерфейса <code>BeanFactory</code> – <code>XmlBeanFactory</code>. <code>XmlBeanFactory</code> получает метаданные из конфигурационного <strong>XML</strong> файла и использует его для создания настроенного приложения или системы.</p>
</div>
<div class="paragraph">
<p><strong>BeanFactory Container</strong> обычно используется тогда, когда ресурсы ограничены (мобильные устройства). Поэтому, если ресурсы не сильно ограничены, то лучше использовать <strong>ApplicationContext</strong>.</p>
</div>
<div class="paragraph">
<p>Для того чтобы <strong>Spring Container</strong> мог создать и поместить в себя Beans необходимы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Java</strong> классы (<strong>POJO</strong>), из которых создаются Beans</p>
</li>
<li>
<p>метаданные, которые подсказывают что и как создавать</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/spring-ioc-container.png" alt="spring ioc container"></span></p>
</div>
<div class="paragraph">
<p>Эти метаданные можно сконфигурировать несколькими способами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Xml</strong> конфигурация;</p>
</li>
<li>
<p><strong>Groovy</strong> конфигурация;</p>
</li>
<li>
<p>Конфигурация через аннотации;</p>
</li>
<li>
<p>Конфигурация через <strong>Java</strong>-код.</p>
</li>
<li>
<p>и т.д.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_bean_и_его_атрибуты">Bean и его атрибуты</h3>
<div class="paragraph">
<p><strong>Bean</strong> – это объект, экземпляр которого создается, собирается и иным образом управляется контейнером <strong>IoC Spring</strong> (создание, вызов методов инициализации и конфигурирование объектов путем связывания между собой).</p>
</div>
<div class="paragraph">
<p>Объекты, которые составляют основу приложения и управляются контейнером <strong>IoC Spring</strong>, называются <strong>Components</strong> (<strong>компонентами</strong> или управляемые Java-объект).</p>
</div>
<div class="paragraph">
<p>Определение <strong>Beans</strong> содержит метаданные конфигурации, которые необходимы управляющему контейнеру для получения следующей информации:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Как создать бин;</p>
</li>
<li>
<p>Информацию о жизненном цикле бина;</p>
</li>
<li>
<p>Зависимости бина.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>С помощью этих метаданных (атрибуты бина) мы можем настраивать бины.</p>
</div>
<div class="paragraph">
<p><strong>Bean</strong> имеет следующие атрибуты:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>class</strong> - этот атрибут является обязательным и указывает конкретный класс Java-приложения, который будет использоваться для создания бина.</p>
</li>
<li>
<p><strong>id</strong>/<strong>name</strong>- уникальный идентификатор бина. В случае конфигурации с помощью <strong>xml</strong>-файла, вы можете использовать свойство <code>id</code> и/или <code>name</code> для идентификации бина.</p>
</li>
<li>
<p><strong>scope</strong> - это свойство определяет область видимости создаваемых объектов.</p>
</li>
<li>
<p><strong>constructor-arg</strong> - определяет конструктор, использующийся для внедрения зависимости. Имеет атрибут <code>ref</code>, который указывает на <code>id</code> бина с которым нужно связываться.</p>
</li>
<li>
<p><strong>properties</strong> - определяет свойства внедрения зависимости.</p>
</li>
<li>
<p><strong>initialization method</strong> - здесь определяется метод инициализации бина</p>
</li>
<li>
<p><strong>destruction method</strong> - метод уничтожения бина, который будет использоваться при уничтожении контейнера, содержащего бин.</p>
</li>
<li>
<p><strong>autowiring mode</strong> - определяет режим автоматического связывания при внедрении зависимости.</p>
</li>
<li>
<p><strong>lazy-initialization mode</strong> - режим ленивой инициализации даёт контейнеру <strong>IoC</strong> команду создавать экземпляр бина при первом запросе, а не при запуске приложения.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_bean_scopes">Bean Scopes</h3>
<div class="paragraph">
<p>Очень важной особенностью является задание области применения бинов. По умолчанию всегда используется <strong>singleton</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Scope</strong> (область видимости) определяет:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>жизненный цикл бина;</p>
</li>
<li>
<p>возможное количество создаваемых бинов.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Разновидности <strong>bean scope</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Singleton</strong> – тип бина, при котором, создается одна сущность на <strong>Spring-контейнер</strong> (значение по умолчанию)</p>
</li>
<li>
<p><strong>Prototype</strong> – тип бина, при котором, каждый раз создается новая сущность бина.</p>
</li>
<li>
<p><strong>Request</strong> – тип бина, при котором сущность бина создается одна на request. Такой тип бина справедлив для контекста веб-приложения.</p>
</li>
<li>
<p><strong>Session</strong> – тип бина, при котором сущность бина создается только одна на объект http-session. Такой тип бина справедлив для контекста веб-приложения.</p>
</li>
<li>
<p><strong>Global-session</strong> – тип бина, при котором сущность бина одна создается на приложение. Такой тип бина справедлив для контекста портлета.</p>
</li>
<li>
<p><strong>Application</strong> – тип бина, задаваемый в единственном экземпляре на контекст сервлета. Действителен для контекста веб-приложения.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_конфигурация">Конфигурация</h3>
<div class="paragraph">
<p>Как указывалось выше, существует 4 вида конфигурации метаданных для создания бинов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Xml конфигурация</strong> — <code>ClassPathXmlApplicationContext("context.xml")</code>;</p>
</li>
<li>
<p><strong>Groovy конфигурация</strong> — <code>GenericGroovyApplicationContext("context.groovy")</code>;</p>
</li>
<li>
<p>Конфигурация через аннотации с указанием пакета для сканирования — <code>AnnotationConfigApplicationContext("package.name")</code>;</p>
</li>
<li>
<p><strong>JavaConfig</strong> — конфигурация через аннотации с указанием класса (или массива классов) помеченного аннотацией <code>@Configuration</code> — <code>AnnotationConfigApplicationContext(JavaConfig.class)</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_xml_конфигурация">Xml конфигурация</h4>
<div class="paragraph">
<p>Чтобы использовать настройку через xml-файл, необходимо создать <code>ClassPathXmlApplicationContext</code> и в параметры передать <strong>CLASSPATH</strong> xml-файла.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ниже приведен пример простого конфигурационного файла <strong>xml</strong> <code>applicationContext.xml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context.xsd"&gt;

    &lt;bean id = "villain" class = "film.Villain" lazy-init= "true"&gt;
        &lt;property name = "name" value = "Vasily"/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_groovy_конфигурация">Groovy конфигурация</h4>
<div class="paragraph">
<p>При конфигурации контекста с помощью <strong>groovy</strong>-файла, необходимо сформировать <code>GenericGroovyApplicationContext</code>, который принимает на вход строку с конфигурацией контекста. Эта конфигурация работает по сути так же, как и <strong>xml</strong>, только с <strong>groovy</strong>-файлами. К тому же, <code>GroovyApplicationContext</code> нормально работает и с <strong>xml</strong>-файлом.</p>
</div>
<div class="paragraph">
<p>Пример простого конфигурационного <strong>Groovy</strong>-файла:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">beans {
    goodOperator(film.Operator) {bean - &gt;
            bean.lazyInit = 'true' &gt;
            name = 'Good Oleg'
         }
    badOperator(film.BadOperator){bean - &gt;
            bean.lazyInit = 'true' &gt;
            name = 'Bad Oleg' / &gt;
        }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_конфигурация_через_аннотации">Конфигурация через аннотации</h4>
<div class="paragraph">
<p>При конфигурации через аннотации используются следующие аннотации:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Component</code></p>
</li>
<li>
<p><code>@Repository</code></p>
</li>
<li>
<p><code>@Service</code></p>
</li>
<li>
<p><code>@Controller</code></p>
</li>
<li>
<p><code>@RestController</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Repository
public class CoolDaoImpl implements CoolDao {
    @Override
    public void doCRUD() {
        //some logic here
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Service
@Scope(BeanDefinition.SCOPE_PROTOTYPE)
public class CoolServiceImpl implements CoolService {
    @Autowired
    private CoolDao dao;

    @PostConstruct
    public void init() {
        //init logic here
    }

    @PreDestroy
    public void closeResources() {
        //close resources here
    }

    @Override
    public void doWork() {
        dao.doCRUD();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_конфигурация_через_java_код">Конфигурация через Java-код</h4>
<div class="paragraph">
<p>Центральными артефактами при конфигурации через <strong>Java</strong> в <strong>Spring</strong> являются <code>@Configuration</code> и <code>@Bean</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
public class JavaConfig {
    @Bean
    public ClassName getClassName() {
        return new ClassName();
    }

    @Bean(initMethod = "init", destroyMethod = "closeResources")
    @Scope(BeanDefinition.SCOPE_PROTOTYPE)
    public ClassName2 getClassName2() {
        ClassName2 className = new ClassName2();
        className.getClassName();
        return service;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_applicationcontext">ApplicationContext</h3>
<div class="paragraph">
<p><code>ApplicationContext</code> — это главный интерфейс в <strong>Spring</strong>-приложении, который предоставляет информацию о конфигурации приложения.</p>
</div>
<div class="paragraph">
<p><code>ApplicationContext</code> представляет собой <strong>Spring Container</strong>, место, где хранятся все созданные бины. Поэтому для получения бина из <strong>Spring Container</strong> нам нужно создать <code>ApplicationContext</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Чаще всего используются следующие реализации <code>ApplicationContext</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FileSystemXmlApplicationContext</code> - загружает данные о бине из xml-файла. При использовании этой реализации в конструкторе необходимо указать полный адрес конфигурационного файла.</p>
</li>
<li>
<p><code>ClassPathXmlApplicationContext</code> - этот контейнер также получает данные о бине из xml-файла. Но в отличие от <code>FileSystemApplicationContext</code>, в этом случае необходимо указать относительный адрес конфигурационного файла (<strong>CLASSPATH</strong>).</p>
</li>
<li>
<p><code>WebXmlApplicationContext</code> - эта реализация <code>ApplicationContext</code> получает необходимую информацию из веб-приложения.</p>
</li>
<li>
<p><code>AnnotationConfigApplicationContext</code> - конфигурация через аннотации с указанием пакета для сканирования</p>
</li>
<li>
<p><code>GenericGroovyApplicationContext</code> - конфигурация через <strong>groovy</strong>-файл</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>На рисунке ниже приведены этапы формирования <code>ApplicationContext</code>:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/stages-of-context-initialization.png" alt="stages of context initialization"></span></p>
</div>
<div class="sect3">
<h4 id="_парсинг_конфигурации_и_создание_beandefinition">Парсинг конфигурации и создание <code>BeanDefinition</code></h4>
<div class="paragraph">
<p>На первом этапе происходит чтение конфигураций и создание <code>BeanDefinition</code>.</p>
</div>
<div class="paragraph">
<p><code>BeanDefinition</code> — это специальный интерфейс, через который можно получить доступ к метаданным будущего бина. В зависимости от того, какая у вас конфигурация, будет использоваться тот или иной механизм парсинга конфигурации.</p>
</div>
<div class="sect4">
<h5 id="_xml_config">XML config</h5>
<div class="paragraph">
<p>Для <strong>xml</strong> конфигурации используется класс — <code>XmlBeanDefinitionReader</code>, который реализует интерфейс <code>BeanDefinitionReader</code>. <code>XmlBeanDefinitionReader</code> получает <code>InputStream</code> и загружает <code>Document</code> через <code>DefaultDocumentLoader</code>. Далее обрабатывается каждый элемент документа и если он является бином, то создается <code>BeanDefinition</code> на основе заполненных данных (<code>id</code>, <code>name</code>, <code>class</code>, <code>alias</code>, <code>init-method</code>, <code>destroy-method</code> и др.)</p>
</div>
<div class="paragraph">
<p>Каждый <code>BeanDefinition</code> помещается в <strong>map</strong>. <strong>Map</strong> хранится в классе <code>DefaultListableBeanFactory</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_groovy_config">Groovy config</h5>
<div class="paragraph">
<p>Конфигурация через <strong>groovy</strong> очень похожа на конфигурацию через <strong>xml</strong>, за исключением того, что в файл не <strong>xml</strong>, а <strong>groovy</strong>. Чтением и парсинг <strong>groovy</strong> конфигурации занимается класс <code>GroovyBeanDefinitionReader</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_annotations_based_config">Annotations-based config</h5>
<div class="paragraph">
<p>Для конфигурации через аннотации с указанием пакета для сканирования или <strong>JavaConfig</strong> используется класс <code>AnnotationConfigApplicationContext</code>. Этот класс имеет следующие поля, с помощью которых происходит создание <code>BeanDefinition</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AnnotatedBeanDefinitionReader</code>;</p>
</li>
<li>
<p><code>ClassPathBeanDefinitionScanner</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>ClassPathBeanDefinitionScanner</code> сканирует указанный пакет на наличие классов помеченных аннотацией <code>@Component</code> (или любой другой аннотацией которая включает в себя <code>@Component</code>). Найденные классы парсятся и для них создаются <code>BeanDefinition</code>.</p>
</div>
<div class="paragraph">
<p>Чтобы сканирование было запущено, в конфигурации должен быть указан пакет для сканирования. Вся магия работы с аннотациями, как в случае с <strong>xml</strong> и <strong>groovy</strong>, заключается именно в классе <code>ClassReader.class</code> из пакета <code>springframework.asm</code>. Специфика этого ридера заключается в том, что он умеет работать с байт-кодом. То есть, ридер достает <code>InputStream</code> из байт-кода, сканирует его и ищет там аннотации.</p>
</div>
<div class="paragraph">
<p><code>AnnotatedBeanDefinitionReader</code> работает в несколько этапов.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Первый этап</strong>: регистрация всех <code>@Configuration</code> для дальнейшего парсинга.<br>
Если в конфигурации используются <code>@Conditional</code>, то будут зарегистрированы только те конфигурации, для которых Condition вернет <code>true</code>. Аннотация <code>@Conditional</code> появилась в четвертой версии <strong>Spring Framework</strong>. Она используется в случае, когда на момент поднятия контекста нужно решить, создавать бин/конфигурацию или нет. Причем решение принимает специальный класс, который обязан реализовать интерфейс <code>Condition</code>.</p>
</li>
<li>
<p><strong>Второй этап</strong>: регистрация специального <code>BeanFactoryPostProcessor</code><br>
Если точнее, регистрация <code>BeanDefinitionRegistryPostProcessor</code>, который при помощи класса <code>ConfigurationClassParser</code> парсит <strong>JavaConfig</strong> и создает <code>BeanDefinition</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Каждый <code>BeanDefinition</code> помещается в <strong>map</strong>, который хранится в классе <code>DefaultListableBeanFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private final Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new ConcurrentHashMap&lt;String, BeanDefinition&gt;();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_настройка_созданных_beandefinition_beanfactorypostprocessor">Настройка созданных <code>BeanDefinition</code> (<code>BeanFactoryPostProcessor</code>)</h4>
<div class="paragraph">
<p>После первого этапа у нас имеется <strong>map</strong>, в котором хранятся <code>BeanDefinition</code>. На этом этапе у нас есть возможность повлиять на то, какими будут наши бины еще до их фактического создания, иначе говоря мы имеем доступ к метаданным класса. Для этого существует специальный интерфейс <code>BeanFactoryPostProcessor</code>, реализовав который, мы получаем доступ к созданным <code>BeanDefinition</code> и можем их изменять.</p>
</div>
<div class="paragraph">
<p>В этом интерфейсе всего один метод:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Метод <code>postProcessBeanFactory()</code> принимает параметром <code>ConfigurableListableBeanFactory</code>. Данная фабрика содержит много полезных методов, в том числе <code>getBeanDefinitionNames()</code>, через который мы можем получить все <code>BeanDefinitionNames</code>, а уже потом по конкретному имени получить <strong>BeanDefinition</strong> для дальнейшей обработки метаданных</p>
</div>
</div>
<div class="sect3">
<h4 id="_создание_собственных_factorybean">Создание собственных <code>FactoryBean</code></h4>
<div class="paragraph">
<p>На этом этапе, если не устраивает <strong>BeanFactory</strong> из-под капота, можно создать собственные <code>FactoryBean</code>.</p>
</div>
<div class="paragraph">
<p><code>FactoryBean</code> — это <strong>generic</strong> интерфейс, которому можно делегировать процесс создания бинов необходимого типа. В те времена, когда конфигурация была исключительно в <strong>xml</strong>, разработчикам был необходим механизм с помощью которого они бы могли управлять процессом создания бинов. Именно для этого и был сделан этот интерфейс.</p>
</div>
<div class="paragraph">
<p>Чтобы создать свою фабрику бинов (собственный <code>FactoryBean</code>), необходимо реализовать интерфейс <code>FactoryBean</code> и переопределить три его метода.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
public class ClassNameFactory implements FactoryBean&lt;ClassName&gt; {
    @Override
    public ClassName getObject() throws Exception {
        return new ClassName();
    }

    @Override
    public Class&lt;?&gt; getObjectType() {
        return ClassName.class;
    }

    @Override
    public boolean isSingleton() {
        return false;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_создание_экземпляров_бинов">Создание экземпляров бинов</h4>
<div class="paragraph">
<p>На этом этапе происходит создание бинов.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Созданием экземпляров бинов занимается <strong>BeanFactory</strong> при этом, если нужно, делегирует это кастомным <strong>FactoryBean</strong>.</p>
</li>
<li>
<p>Экземпляры бинов создаются на основе ранее созданных <strong>BeanDefinition</strong>.</p>
</li>
<li>
<p>При этом важно знать, что на этапе поднятия контекста создаются только бины с областью видимости <strong>Singleton</strong>.</p>
</li>
<li>
<p>Остальные бины создаются тогда, когда необходимы.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/create-bean-by-bean-factory.png" alt="create bean by bean factory"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_настройка_созданных_бинов_beanpostprocessor">Настройка созданных бинов (<code>BeanPostProcessor</code>)</h4>
<div class="paragraph">
<p>На данном этапе можно производить дополнительную настройку созданных бинов. Настройка производиться через интерфейс <code>BeanPostProcessor</code>.</p>
</div>
<div class="paragraph">
<p><code>BeanPostProcessor</code> - позволяет настраивать бины до того, как они попадут в <strong>Spring</strong> контейнер. Данный интерфейс имеет два метода.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>postProcessBeforeInitialization(Object bean, String beanName)</code>;</p>
</li>
<li>
<p><code>postProcessAfterInitialization(Object bean, String beanName)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>BeanFactory</code> вызывает оба метода для каждого бина, и прогоняет бин через все <code>BeanPostProcessor</code>. У обоих методов параметры абсолютно одинаковые. Разница только в порядке их вызова. Первый вызывается до <strong>init</strong>-метода, второй, после.</p>
</div>
<div class="paragraph">
<p>Порядок в котором будут вызваны <strong>BeanPostProcessor</strong> не известен, но мы точно знаем что выполнены они будут последовательно.</p>
</div>
<div class="paragraph">
<p>Важно понимать, что на данном этапе экземпляр бина уже создан и идет его донастройка. Процесс донастройки показан на рисунке ниже.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/bean-post-processor.png" alt="bean post processor"></span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
public class ClassBeanPostProcessor implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_схема_создания_бинов">Схема создания бинов</h3>
<div class="paragraph">
<p>Несмотря на кажущуюся сложность, жизненный цикл бинов крайне прост и лёгок для понимания. После создания экземпляра бина, могут понадобиться некоторые действия для того, чтобы сделать его работоспособным. Также при удалении бина из контейнера, необходима очистка.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/lifecycle-bean.png" alt="lifecycle bean"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Spring</strong> создает <strong>bean</strong>.</p>
</li>
<li>
<p><strong>Spring</strong> задает значения и ссылки в поля <strong>bean</strong>.</p>
</li>
<li>
<p>Если <strong>bean</strong> реализует <code>BeanNameAware</code>, <strong>Spring</strong> передает <strong>ID</strong> бина в метод <code>setBeanName()</code>.</p>
</li>
<li>
<p>Если <strong>bean</strong> реализует <code>BeanFactoryAware</code>, <strong>Spring</strong> вызывает <code>setBeanFactory()</code>, передавая туда <strong>bean</strong> <strong>factory</strong>.</p>
</li>
<li>
<p>Если <strong>bean</strong> реализует интерфейс <code>ApplicationContextAware</code>, <strong>Spring</strong> вызовет <code>setApplicationContext()</code>, передавая по ссылке контекст приложения.</p>
</li>
<li>
<p>Если <strong>bean</strong> реализует интерфейс <code>BeanPostProcessor</code>, <strong>Spring</strong> вызывает метод бина <code>postProcessBeforeInitialization()</code>.</p>
</li>
<li>
<p>На этом происходит вызов методов init().
Если <strong>bean</strong> реализуют интерфейс <code>InitializingBean</code>, <strong>Spring</strong> вызывает метод <code>afterPropertiesSet()</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class CachingMovieLister {
    @PostConstruct
    public void populateMovieCache() {
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Если <strong>bean</strong> реализует <code>BeanPostProcessor</code>, <strong>Spring</strong> вызовет метод <strong>бина</strong> <code>postProcessAfterInitialization()</code>.</p>
</li>
<li>
<p>В этой точке, <strong>bean</strong> готов для использования приложением и останется в контексте приложения, пока контекст не будет уничтожен.</p>
</li>
<li>
<p>На этом происходит вызов методов destroy().
Если <strong>bean</strong> реализует интерфейс <code>DisposableBean</code>, <strong>Spring</strong> вызовет <code>destroy()</code> метод.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class CachingMovieLister {
    @PreDestroy
    public void clearMovieCache() {
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Компонент перестает существовать.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ioc_di_autowired">IoC, DI, <code>@Autowired</code></h3>
<div class="paragraph">
<p>Как было описано выше, ядром <strong>Spring</strong> является контейнер <strong>Inversion of Control</strong>, функция которого создать и управлять объектами (бинами), а благодаря основной реализации <strong>Dependency Injection</strong> и связывать различные объекты между собой.</p>
</div>
<div class="paragraph">
<p>Связывать объекты между собой можно несколькими способами:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>С помощью конструктора</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MovieRecommender {
    private final CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
        this.customerPreferenceDao = customerPreferenceDao;
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>С помощью метода (сеттер)</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class SimpleMovieLister {
    private MovieFinder movieFinder;

    @Autowired
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Через поле</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MovieRecommender {
    @Autowired
    private MovieCatalog movieCatalog;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>По умолчанию внедрение зависимостей через методы или поля рассматриваются как обязательные зависимости. Однако, Вы можете изменить это поведение, устанавливая для <strong>required</strong> атрибута <code>@Autowired</code> значение <strong>false</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class SimpleMovieLister {
    private MovieFinder movieFinder;

    @Autowired(required = false)
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В ситуации, когда имеются два бина для внедрения можно воспользоваться следующими аннотациями:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Primary</code> - указывает, что текущий бин будет внедряться по умолчанию, если их несколько</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
public class MovieConfiguration {
    @Bean
    @Primary
    public MovieCatalog firstMovieCatalog() { ... }

    @Bean
    public MovieCatalog secondMovieCatalog() { ... }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Qualifier</code> - указывает какой бин необходимо использовать для внедрения</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
@Qualifier("Action")
public class ActionMovieCatalog implements MovieCatalog {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MovieRecommender {
    @Autowired
    @Qualifier("Action")
    private MovieCatalog movieCatalog;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_component_service_и_другие_аннотации"><code>@Component</code>, <code>@Service</code> и другие аннотации</h3>
<div class="paragraph">
<p>В <strong>Spring</strong> используются следующие аннотации:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Component</code><br>
Аннотация для любого компонента фреймворка.</p>
</li>
<li>
<p><code>@Repository</code><br>
(Доменный слой) Аннотация показывает, что класс функционирует как репозиторий и требует наличия прозрачной трансляции исключений. Преимуществом трансляции исключений является то, что слой сервиса будет иметь дело с общей иерархией исключений от <strong>Spring</strong> (<code>DataAccessException</code>) вне зависимости от используемых технологий доступа к данным в слое данных.</p>
</li>
<li>
<p><code>@Service</code><br>
(Сервис-слой приложения) Аннотация, объявляющая, что этот класс представляет собой сервис – компонент сервис-слоя. Сервис является подтипом класса <code>@Component</code>. Использование данной аннотации позволит искать бины-сервисы автоматически.</p>
</li>
<li>
<p><code>@Controller</code><br>
(Слой представления) Аннотация для маркировки <strong>java</strong> класса, как класса контроллера. Данный класс представляет собой компонент, похожий на обычный сервлет (<strong>HttpServlet</strong>) (работающий с объектами <strong>HttpServletRequest</strong> и <strong>HttpServletResponse</strong>), но с расширенными возможностями от <strong>Spring</strong> <strong>Framework</strong>.</p>
</li>
<li>
<p><code>@RestController</code><br>
Аннотация аккумулирует поведение двух аннотаций <code>@Controller</code> и <code>@ResponseBody</code> (показывает что данный метод может возвращать собственный объект в виде <strong>xml</strong>, <strong>json</strong> и другие).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/core/annotation.jpg" alt="annotation"></span></p>
</div>
<div class="paragraph">
<p>Данные аннотации используются при конфигурации приложения через аннотации.</p>
</div>
<div class="paragraph">
<p>Основной считается <code>@Component</code>, общий стереотип для любого компонента, управляемого <strong>Spring</strong>. <code>@Repository</code>, <code>@Service</code> И <code>@Controller</code> являются специализациями <code>@Component</code> для более конкретных случаев применения (в настойчивости, обслуживании и презентации слоев, соответственно).</p>
</div>
<div class="paragraph">
<p>Бины, получившиеся при помощи <code>@Repository</code>, дополнительно имеют обработку для <strong>JDBC</strong> <strong>Exception</strong>.</p>
</div>
<div class="paragraph">
<p><code>@RestController = @Controller + @ResponseBody</code>. Этот бин для конвертации входящих/исходящих данных использует <strong>Jackson message converter</strong>. Как правило, целевые данные представлены в <strong>json</strong> или <strong>xml</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links">Links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/">Spring Framework Documentation</a></p>
</li>
<li>
<p><a href="https://proselyte.net/tutorials/spring-tutorial-full-version">Руководство по Spring</a></p>
</li>
<li>
<p><a href="https://www.tutorialspoint.com/spring/">Spring Tutorial</a></p>
</li>
<li>
<p><a href="https://javarush.ru/groups/posts/spring-framework-java-1">Spring для ленивых. Основы, базовые концепции и примеры с кодом. Часть 1</a></p>
</li>
<li>
<p><a href="https://javarush.ru/groups/posts/477-spring-dlja-lenivihkh-osnovih-bazovihe-koncepcii-i-primerih-s-kodom-chastjh-2">Spring для ленивых. Основы, базовые концепции и примеры с кодом. Часть 2</a></p>
</li>
<li>
<p><a href="https://habr.com/ru/post/222579/">Spring изнутри. Этапы инициализации контекста</a></p>
</li>
<li>
<p><a href="https://habr.com/ru/post/350682/">Spring: вопросы к собеседованию</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=BmBr5diz8WA&amp;ab_channel=JUG.ru">YouTube: Евгений Борисов — Spring-потрошитель, часть 1</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=cou_qomYLNU&amp;t=3443s&amp;ab_channel=JUG.ru">YouTube: Евгений Борисов — Spring-потрошитель, часть 2</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/playlist?list=PLxqzxxW1gWwIuSgG8od6N4LZg5V4kKp72">YouTube: Spring Framework для начинающих [Jetbulb</a>]</p>
</li>
<li>
<p><a href="https://www.youtube.com/playlist?list=PLAma_mKffTOR5o0WNHnY0mTjKxnCgSXrZ">YouTube: Spring Framework [alishev</a>]</p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=yRr_vzqha-g&amp;ab_channel=AndreiLegan">YouTube: Spring изнутри. Этапы инициализации контекста</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=l20USjGgnTo&amp;t=3881s&amp;ab_channel=Jetbulb">YouTube: Java Spring Контекст</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_mvc">Spring MVC</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Spring MVC</strong> – это фреймворк для создания <strong>web</strong>-приложений на <strong>Java</strong>, в основе которого лежит шаблон проектирования <strong>MVC</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Spring MVC</strong> — это старый добрый <strong>MVC</strong>-фреймворк, который позволяет довольно легко писать <strong>web</strong>-сайты или <strong>web</strong>-сервисы.</p>
</li>
<li>
<p>Он прекрасно интегрируется со множеством шаблонных библиотек и библиотек преобразования данных, а также с остальной частью экосистемы <strong>Spring</strong>, такой, как <strong>Spring Boot</strong>.</p>
</li>
<li>
<p>Главным образом он позволяет вам сосредоточиться на написании своей бизнес-логики, не беспокоясь о стандартном коде для Servlet, разборе <strong>HTTP</strong>-запросов/ответов и преобразовании данных.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Паттерн <strong>MVC</strong> разделяет аспекты приложения (логику ввода, бизнес-логику и логику <strong>UI</strong>), обеспечивая при этом свободную связь между ними.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Model</strong> (<strong>Модель</strong>) инкапсулирует (объединяет) данные приложения, в целом они будут состоять из <strong>POJO</strong>.</p>
</li>
<li>
<p><strong>View</strong> (<strong>Отображение</strong>, <strong>Вид</strong>) отвечает за отображение данных <strong>Модели</strong>, — как правило, генерируя <strong>HTML</strong>, которые мы видим в своём браузере.</p>
</li>
<li>
<p><strong>Controller</strong> (<strong>Контроллер</strong>) обрабатывает запрос пользователя, создаёт соответствующую <strong>Модель</strong> и передаёт её для отображения в <strong>Вид</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Рабочий процесс обработки запроса проиллюстрирован на следующей диаграмме:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/mvc/schema-working-dispatcher-servlet.png" alt="schema working dispatcher servlet"></span></p>
</div>
<div class="paragraph">
<p>После получения <strong>HTTP</strong>-запроса <strong>DispatcherServlet</strong>  выполняет следующие действия.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>После получения <strong>HTTP</strong>-запроса <strong>DispatcherServlet</strong> даёт указание объекту <strong>HandlerMapping</strong> (<strong>обработка связывания</strong>), который вызывает следующий объект.</p>
</li>
<li>
<p><strong>DispatcherServlet</strong> посылает запрос контроллеру и вызывает соответствующие методы. Эти методы возвращают объект, в соответствии с бизнес-логикой метода и передают название ссылки обратно в <strong>DispatcherServlet</strong>.</p>
</li>
<li>
<p>C помощью <strong>ViewResolver</strong>, <strong>DispatcherServlet</strong> подбирает необходимый вид для запроса.</p>
</li>
<li>
<p>Когда внешний вид сформирован, <strong>DispatcherServlet</strong> передаёт эти данные в модуль <strong>View</strong>, который обрабатывается браузером пользователя.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_dispatcherservlet"><code>DispatcherServlet</code></h3>
<div class="paragraph">
<p>Вся логика работы <strong>Spring MVC</strong> построена вокруг <code>DispatcherServlet</code>.</p>
</div>
<div class="paragraph">
<p><code>DispatcherServlet</code> — полностью интегрированный Servlet в <strong>Spring IoC</strong> контейнер и таким образом получает доступ ко всем возможностям <strong>Spring</strong>.</p>
</div>
<div class="paragraph">
<p>При обработке запросов используется паттерн <strong>pattern-savvy reader</strong>, который распознает <code>DispatcherServlet</code> как выражение из шаблона проектирования <strong>Front Controller</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/mvc/front-contreoller.png" alt="front contreoller"></span></p>
</div>
<div class="paragraph">
<p><code>DispatcherServlet</code> является основным контроллером <strong>Spring MVC Application</strong>. Все входящие веб-запросы проходят через <code>DispatcherServlet</code> перед обработкой отдельными контроллерами <strong>Spring</strong>, то есть классами, аннотированными с помощью аннотации <code>@Controller</code>.</p>
</div>
<div class="paragraph">
<p><code>DispatcherServlet</code> — это обычный Servlet (наследуется от базового класса <code>HttpServlet</code>). Как и любой другой Servlet, <code>DispatcherServlet</code> необходимо зарегистрировать и настроить. Сделать это можно или в файле <code>web.xml</code></p>
</div>
<div class="listingblock">
<div class="title"><code>web.xml</code></div>
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;web-app&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;SpringMVC&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Либо в <strong>Java</strong>-коде переопределив метод <code>onStartup()</code> интерфейса <code>WebApplicationInitializer</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class WebInitializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext context = new AnnotationConfigWebApplicationContext();
        context.register(WebConfiguration.class);
        DispatcherServlet servlet = new DispatcherServlet(context);
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", servlet);
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>WebApplicationInitializer</code> — интерфейс, предоставляемый <strong>Spring MVC</strong>, который гарантирует инициализацию при старте контейнера.</p>
</div>
<div class="paragraph">
<p>Servlet диспетчера настроен как <code>load-on-startup = 1</code>, что означает, что этот Servlet должен создаваться контейнером Servlets при развертывании приложения, а не при получении запроса на этот запрос.</p>
</div>
</div>
<div class="sect2">
<h3 id="_handlermapping"><code>HandlerMapping</code></h3>
<div class="paragraph">
<p>Одним из важных интерфейсов в Spring является <code>HandlerMapping</code>.</p>
</div>
<div class="paragraph">
<p><code>DispatcherServlet</code> с помощью <code>HandlerMapping</code> определяет какой контроллер он должен использовать для определенного <strong>request</strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/mvc/schema-spring-mvc-detail.png" alt="schema spring mvc detail"></span></p>
</div>
<div class="paragraph">
<p>По определению <code>HandlerMapping</code> — интерфейс реализующийся объектами, которые определяют отображение между запросами и объектами обработчиков.</p>
</div>
<div class="paragraph">
<p>Реализации <code>HandlerMapping</code> могут поддерживать перехватчики (<strong>interceptors</strong>), но не содержат их. Обработчик будет всегда обернут в экземпляре <code>HandlerExecutionChain</code>, возможно в сопровождении некоторых экземпляров <code>HandlerInterceptor</code>. <code>DispatcherServlet</code> сначала вызывает  метод <code>preHandle()</code> каждого <code>HandlerInterceptor</code> в заданном порядке, и в конце, внедряет обработчик, если все методы <code>preHandle()</code> вернули <code>true</code>.</p>
</div>
<div class="paragraph">
<p>Возможность параметризации такого отображения является мощной и необычной способностью в рамках <strong>MVC</strong> фреймворка. Например, можно написать пользовательское отображение на основе состояния <strong>session</strong>, состояние <strong>cookie</strong> или многих других переменных.</p>
</div>
<div class="paragraph">
<p>По умолчанию интерфейс <code>HandlerMapping</code> в <strong>Spring MVC</strong> реализуется классом <code>RequestMappingHandlerMapping</code>. Существуют другие реализации интерфейса, которые используют другие параметры для поиска контроллера, соответствующего запросу. В <strong>Spring MVC</strong> вы можете встретить реализацию интерфейса, когда применяете аннотацию <code>@RequestMapping</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RequestMapping(value = "/", method = RequestMethod.GET)
public class Main{
    public ModelAndView main() {
        ModelAndView modelAndView = new ModelAndView();
        return modelAndView;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controller"><code>Controller</code></h3>
<div class="paragraph">
<p><code>DispatcherServlet</code> отправляет запрос контроллерам для выполнения определённых функций.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/mvc/request-lifecycle.png" alt="Request Lifecycle"></span></p>
</div>
<div class="paragraph">
<p>Аннотации <code>@Controller</code> или <code>@RestController</code> указывают, что конкретный класс является контроллером. Аннотация <code>@RestController</code> равна одновременно <code>@Controller</code> + <code>@ResponseBody</code>.</p>
</div>
<div class="paragraph">
<p><code>@ResponseBody</code> - дает фреймворку понять, что объект, который вы вернули из метода надо прогнать через <code>HttpMessageConverter</code>, чтобы получить готовое представление к отправке клиенту.</p>
</div>
<div class="paragraph">
<p>Аннотация <code>@RequestMapping</code> используется для <strong>mapping</strong> (<strong>связывания</strong>) с <strong>URL</strong> для всего класса или для конкретного метода обработчика.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Controller
@RequestMapping("/hello")
public class HelloController {
   @RequestMapping(method = RequestMethod.GET)
   public String printHello(ModelMap model) {
      model.addAttribute("message", "Hello Spring MVC Framework!");
      return "hello";
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>В первом случае, <code>@RequestMapping</code> указывает, что все методы в данном <strong>Controller</strong> относятся к <strong>URL</strong>-адресу <code>/hello</code>, а во втором как дефолтного метода для обработки <strong>HTTP</strong>-запросов <strong>GET</strong> (в данном <strong>Controller</strong>). Также можно данную аннотацию объявить над методом <code>@RequestMapping(value = "/hello", method = RequestMethod.GET)</code>.</p>
</div>
<div class="paragraph">
<p>Также в контроллере может использоваться аннотация <code>@ModelAttribute</code>, которая ставится над методом или в аргументах методов.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Controller
public class HelloController {
    @RequestMapping("/processForm")
    public String processForm(@ModelAttribute("student") Student theStudent) {
        System.out.println("theStudent :"+ theStudent.getLastName());
        return "form-details";
    }

    @ModelAttribute("object")
    public Object checkOptions() {
        return new Object();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;form:form action="processForm" modelAttribute="student"&gt;
    First Name : &lt;form:input path="firstName" /&gt;
    &lt;br&gt;&lt;br&gt;
    Last Name : &lt;form:input path="lastName" /&gt;
    &lt;br&gt;&lt;br&gt;
    &lt;input type="submit" value="submit"/&gt;
&lt;/form:form&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В зависимости от места ее применения, работать она будет по-разному. В первом случае она позволяет связать <strong>html</strong>-форму с <strong>java</strong>-объектом. А во втором случае, добавит в модель каждого метода контроллера объект с ключ-значением - <code>object</code> и <code>new Object()</code>.</p>
</div>
<div class="sect3">
<h4 id="_requestparam_и_pathvariable"><code>@RequestParam</code> и <code>@PathVariable</code></h4>
<div class="paragraph">
<p>Часто используются аннотации <code>@RequestParam</code> и <code>@PathVariable</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Controller
@RequestMapping("api/test")
public class HelloController {
    @GetMapping(path = "/filter")
    public Test getByFilter(@RequestParam(name = "text", required = false) String text) {
        return testService.getByFilter(filterTest);
    }

    @GetMapping(path = "/{id}")
    @ResponseBody
    public Test findById(@PathVariable String id) {
        return testService.findById(id);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>При использовании <code>@RequestParam</code> передача значений будет в виде <code><a href="http://localhost:8080/api/test/filter?id=abc" class="bare">http://localhost:8080/api/test/filter?id=abc</a></code>. В этом случае данный параметр является не обязательным, но при установке атрибута <code>required = true</code> (по умолчанию <code>false</code>) станет обязательным для заполнения.</p>
</div>
<div class="paragraph">
<p>При использовании <code>@PathVariable</code> передача значений будет в виде <code><a href="http://localhost:8080/api/test/abc" class="bare">http://localhost:8080/api/test/abc</a></code>. В этом случае данный параметр является обязательным, но при установке атрибута <code>required = false</code> (по умолчанию <code>true</code>) станет не обязательным для заполнения.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_viewresolver"><code>ViewResolver</code></h3>
<div class="paragraph">
<p><code>DispatcherServlet</code> с помощью <code>ViewResolver</code> определяет какое представление необходимо использовать на основании полученного имени.</p>
</div>
<div class="paragraph">
<p><code>ViewResolver</code> — интерфейс, реализуемый объектами, которые способны находить представления <strong>View</strong> по имени <strong>View Name</strong></p>
</div>
<div class="paragraph">
<p><strong>Spring MVC</strong> поддерживает множество типов <strong>View</strong> для различных технологий отображения страницы. В том числе — <strong>JSP</strong>, <strong>HTML</strong>, <strong>PDF</strong>, <strong>Excel</strong>, <strong>XML</strong>, <strong>Velocity</strong> <strong>templates</strong>, <strong>XSLT</strong>, <strong>JSON</strong>, каналы <strong>Atom</strong> и <strong>RSS</strong>, <strong>JasperReports</strong> и другие.</p>
</div>
<div class="paragraph">
<p>По умолчанию реализацией интерфейса <code>ViewResolver</code> является класс <code>InternalResourceViewResolver</code>. Также могут использоваться <code>FreeMarkerViewResolver</code>, <code>BeanNameViewResolver</code>, <code>ResourceBundleViewResolver</code>, <code>TilesViewResolver</code> и многие другие.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
public class WebConfiguration {
    @Bean
    public InternalResourceViewResolver internalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../assets/img/java/spring/mvc/prefix-suffix.png" alt="prefix suffix"></span></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class Main{
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public ModelAndView main() {
        ModelAndView modelAndView = new ModelAndView();
        modelAndView.addObject("userJSP", new User());
        modelAndView.setViewName("index");
        return modelAndView;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>После того как в модель <code>modelAndView</code> было записано имя представления <code>"index"</code> и произошел выход из метода, то в действие включается <strong>ViewResolver</strong>. Для этого примера согласно настройкам в класс <code>InternalResourceViewResolver</code> будет искать представление с именем <code>index</code>, у которого префикс <code>/WEB-INF/views/</code>, а суффикс <code>.jsp</code>. Другими словами он должен найти представление с именем <code>/WEB-INF/views/index.jsp</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;html lang=""&gt;
   &lt;head&gt;
      &lt;title&gt;Hello Spring MVC&lt;/title&gt;
   &lt;/head&gt;

   &lt;body&gt;
      &lt;h2&gt;${userJSP}&lt;/h2&gt;
   &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>В данном случае, переменная <code>${userJSP}</code> выводит тот самый атрибут, установленный в <strong>Controller</strong>. Внутри <strong>View</strong> можно отобразить любое количество атрибутов.</p>
</div>
<div class="paragraph">
<p>Если представление найдено, то произойдет переход на эту страницу. В противном случае результат зависит от настроек реализации интерфейса <code>ViewResolver</code>. По умолчанию возвращается <code>null</code>, но можно возвращать имя или исключение, если вам это необходимо.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exceptionhandler"><code>ExceptionHandler</code></h3>
<div class="paragraph">
<p>Для обработки ошибки существует три варианта обработки:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>для каждого контроллера</p>
</li>
<li>
<p>для каждого исключения</p>
</li>
<li>
<p>глобально</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_уровень_контроллера">Уровень контроллера</h4>
<div class="paragraph">
<p>Изначально основными способами обработки исключений в приложении были <code>HandlerExceptionResolver</code> и аннотация <code>@ExceptionHandler</code>, которая позволяла обрабатывать исключения на уровне отдельного контроллера. Для этого достаточно было объявить метод, в котором будет содержаться вся логика обработки нужного исключения, и проаннотировать его.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RestController
public class ExampleController {
    @GetMapping(value = "/testExceptionHandler", produces = APPLICATION_JSON_VALUE)
    public Response testExceptionHandler() throws BusinessException {
        throw new BusinessException("BusinessException in testExceptionHandler");
    }

    @ExceptionHandler(BusinessException.class)
    public Response handleException(BusinessException e) {
        return new Response(e.getMessage());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Метод <code>handleException()</code> предназначен для обработки ошибок. У него есть аннотация <code>@ExceptionHandler(BusinessException.class)</code>, которая говорит о том, что для последующей обработки будут перехвачены все исключения типа <code>BusinessException</code>. В аннотации <code>@ExceptionHandler</code> можно прописать сразу несколько типов исключений, например так: <code>@ExceptionHandler({BusinessException.class, ServiceException.class})</code>.</p>
</div>
<div class="paragraph">
<p>Основной недостаток <code>@ExceptionHandler</code> в том что он определяется для каждого контроллера отдельно, а не глобально для всего приложения.</p>
</div>
<div class="paragraph">
<p>Также, на уровне контроллера можно формировать ответ путём выброса исключения <code>ResponseStatusException</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RestController
public class ExampleController {
    @GetMapping(value = "/testResponseStatusException", produces = APPLICATION_JSON_VALUE)
    public Response testResponseStatusException() {
        throw new ResponseStatusException(HttpStatus.INTERNAL_SERVER_ERROR, "ResponseStatusException in testResponseStatusException");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Выбрасывая <code>ResponseStatusException</code> можно также возвращать пользователю определённый код статуса, в зависимости от того, что произошло в логике приложения. При этом не нужно создавать собственное исключение и прописывать аннотацию <code>@ResponseStatus</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_уровень_исключений">Уровень исключений</h4>
<div class="paragraph">
<p>Для обработки ошибок на уровне исключений используется <code>ResponseStatusExceptionResolver</code>. Он позволяет настроить код ответа для любого исключения с помощью аннотации <code>@ResponseStatus</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
public class ServiceException extends Exception {
    public ServiceException(String message) {
        super(message);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RestController
public class ExampleController {
    @GetMapping(value = "/testResponseStatusExceptionResolver", produces = APPLICATION_JSON_VALUE)
    public Response testResponseStatusExceptionResolver() throws ServiceException {
        throw new ServiceException("ServiceException in testResponseStatusExceptionResolver");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Из недостатков такого подхода — как и в предыдущем случае отсутствует тело ответа.</p>
</div>
</div>
<div class="sect3">
<h4 id="_уровень_глобальной_обработки">Уровень глобальной обработки</h4>
<div class="paragraph">
<p>Глобально и централизованно обрабатывать исключения с помощью классов с аннотацией <code>@ControllerAdvice</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@ControllerAdvice
public class DefaultAdvice {
    @ExceptionHandler(BusinessException.class)
    public ResponseEntity&lt;Response&gt; handleException(BusinessException e) {
        Response response = new Response(e.getMessage());
        return new ResponseEntity&lt;&gt;(response, HttpStatus.OK);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Любой класс с аннотацией <code>@ControllerAdvice</code> является глобальным обработчиком исключений, который очень гибко настраивается. Метод <code>handleException()</code> имеет аннотацию <code>@ExceptionHandler</code>, в которой можно определить список обрабатываемых исключений.</p>
</div>
<div class="paragraph">
<p>Так же можно в рамках <code>@ControllerAdvice</code> сделать сразу несколько методов с аннотациями <code>@ExceptionHandler</code> для обработки разных исключений.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_links_2">Links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html">Web MVC framework</a></p>
</li>
<li>
<p><a href="https://habr.com/ru/post/336816/">Spring MVC — основные принципы</a></p>
</li>
<li>
<p><a href="https://habr.com/ru/post/500572/">Spring MVC: создание веб-сайтов и RESTful сервисов</a></p>
</li>
<li>
<p><a href="https://habr.com/ru/post/528116/">Обработка исключений в контроллерах Spring</a></p>
</li>
<li>
<p><a href="https://javastudy.ru/spring-mvc/spring-mvc-basic/">Spring MVC — основные понятия, архитектура</a></p>
</li>
<li>
<p><a href="https://javastudy.ru/spring-mvc/spring-mvc-webapplicationcontext/">Spring MVC — WebApplicationContext. Описание интерфейса</a></p>
</li>
<li>
<p><a href="https://javastudy.ru/spring-mvc/spring-mvc-handler-mapping/">Spring MVC — Handler Mapping. Описание интерфейса HandlerMapping</a></p>
</li>
<li>
<p><a href="https://javastudy.ru/spring-mvc/spring-mvc-viewresolver/">Spring MVC — описание интерфейса ViewResolver</a></p>
</li>
<li>
<p><a href="https://proselyte.net/tutorials/spring-tutorial-full-version/spring-mvc-framework/">Руководство по Spring. Spring MVC Framework (основы)</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=1vyf-_5OkW8&amp;list=PLAma_mKffTOR5o0WNHnY0mTjKxnCgSXrZ&amp;index=14&amp;t=1s&amp;ab_channel=alishev">YouTube: Spring Framework. Урок 14: Spring MVC. Теория.</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=JHTqKQgrVKE&amp;list=PLAma_mKffTOR5o0WNHnY0mTjKxnCgSXrZ&amp;index=18&amp;ab_channel=alishev">YouTube: Spring Framework. Урок 17: Контроллеры. Аннотация @Controller.</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=w1FjeTZxQrQ&amp;ab_channel=alishev">YouTube: Spring Framework. Урок 22: Аннотация @ModelAttribute. HTML Формы (Thymeleaf).</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_boot">Spring Boot</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_введение_в_spring_boot">Введение в Spring Boot</h3>
<div class="paragraph">
<p><strong>Spring Boot</strong> — самый популярный фреймворк на основе Java, построенный на базе функций <strong>Spring Framework</strong>. Он используется для создания простых и понятных в понимании standalone (автономных) и web-based (веб) приложений.</p>
</div>
<div class="sect3">
<h4 id="_что_такое_spring_boot">Что такое Spring Boot?</h4>
<div class="paragraph">
<p><strong>Spring Boot</strong> — это проект с открытым исходным кодом, разработанный командой <strong>Pivotal</strong> (команда <strong>Spring</strong>). Он построен на основе <strong>Spring Framework</strong> и предоставляет собой <strong>RAD</strong> (<strong>Rapid Application Development</strong>/<strong>Быстрая разработка приложений</strong>) на основе <strong>Spring Framework</strong>. Он комбинирует <strong>Spring Framework</strong> и third-party libraries (сторонние библиотеки), которые упрощают создание приложений и уменьшения усилия по разработке. В отличие от <strong>Spring Framework</strong>, <strong>Spring Boot</strong> не требует конфигурации на основе XML или аннотаций, поскольку он автоматически настраивает <strong>Spring</strong> и сторонние библиотеки.</p>
</div>
<div class="paragraph">
<p>Целью платформы <strong>Spring Boot</strong> является полное удаление конфигураций на основе XML и сокращение времени разработки и интеграционного тестирования.</p>
</div>
<div class="paragraph">
<p>Цели <strong>Spring Boot</strong> перечислены ниже:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Предложить полный <strong>Opinionated Development Approach</strong>.</p>
</li>
<li>
<p>Обеспечить большую часть функционала неявно или по умолчанию.</p>
</li>
<li>
<p>Избегать написания множества строк кода.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_необходимость_использования_spring_boot">Необходимость использования Spring Boot</h4>
<div class="paragraph">
<p>Некоторые из основных факторов использования среды Spring Boot перечислены ниже:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Он обеспечивает гибкость и простоту при разработке приложений на основе Java.</p>
</li>
<li>
<p>Он позволяет создавать менее трудоемкие приложения, так как большинство вещей управляются им по умолчанию.</p>
</li>
<li>
<p>Он не требует какой-либо конфигурации на основе XML или Java, поскольку он автоматически настраивает Spring и сторонние библиотеки.</p>
</li>
<li>
<p>Он также обеспечивает мощную batch (пакетную) обработку и гибкие транзакции базы данных.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_компоненты_spring_boot">Компоненты Spring Boot</h4>
<div class="imageblock">
<div class="content">
<img src="../../assets/img/java/spring/boot/components.png" alt="components">
</div>
</div>
<div class="paragraph">
<p>As we have discussed, the Spring Boot framework is an upgraded project of the Spring framework with some additional features and components. There are four major components of Spring Boot that are listed below:</p>
</div>
<div class="paragraph">
<p><strong>Spring Boot</strong> — это обновленный проект среды Spring с некоторыми дополнительными функциями и компонентами. Ниже перечислены четыре основных компонента <strong>Spring Boot</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Spring Boot Starters</strong></p>
</li>
<li>
<p><strong>Spring Boot AutoConfiguration</strong></p>
</li>
<li>
<p><strong>Spring Boot CLI</strong></p>
</li>
<li>
<p><strong>Spring Boot Actuator</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Наряду с перечисленными выше основными компонентами в <strong>Spring Boot</strong> доступны еще два дополнительных компонента:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Spring Initializr</strong></p>
</li>
<li>
<p><strong>Spring Boot IDEs</strong></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_spring_boot_starters">Spring Boot Starters</h5>
<div class="paragraph">
<p><strong>Spring Boot Starters</strong> — один из основных компонентов среды <strong>Spring Boot</strong>. Он связывает более одной зависимости в группе. Это также уменьшает количество зависимостей, добавляемых вручную, путем объединения нескольких зависимостей в одну. Таким образом, он добавляет стартер вместо указания множества зависимостей.</p>
</div>
<div class="paragraph">
<p>Например, когда создается приложение <strong>Spring MVC</strong>, требуется множество зависимостей, таких как:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Spring Core</strong></p>
</li>
<li>
<p><strong>Spring Web MVC</strong></p>
</li>
<li>
<p><strong>Spring Web</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Наряду с приведенными выше зависимостями необходимы еще некоторые зависимости. Ручное добавление зависимостей загромождает код. Spring Boot предложил решение этой проблемы.</p>
</div>
<div class="paragraph">
<p>Spring Boot упрощает задачу, поскольку добавляет только <strong>root dependency</strong> (корневую зависимость) или <strong>starter dependency</strong> (начальную зависимость). Когда добавляется starter зависимость в приложение, <strong>Spring Boot</strong> автоматически добавляет в приложение все необходимые зависимости.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_boot_autoconfiguration">Spring Boot AutoConfiguration</h5>
<div class="paragraph">
<p><strong>Spring Boot AutoConfiguration</strong> также является важным компонентом <strong>Spring Boot</strong>. Когда создается любое приложение Spring, нам требуется много кода конфигурации, например конфигурации на основе XML, Java или аннотаций. В большинстве приложений это создает много путаницы и к трате большого количества времени на это.</p>
</div>
<div class="paragraph">
<p>Поэтому для решения проблемы возник <strong>Spring Boot AutoConfiguration</strong>. Он отвечает за сокращение конфигурации Spring. При создании <strong>Spring Boot</strong> приложения  нет необходимости определять какую-либо конфигурацию (на основе XML) и сократить использование конфигурации на основе аннотаций. Использование <strong>Spring Boot AutoConfiguration</strong> делает разработку приложений простой и быстрой, поскольку ее настройка не отнимает много времени.</p>
</div>
<div class="paragraph">
<p>Например, если использовать стартер <code>spring-boot-starter-web</code> в приложении, <strong>Spring Boot</strong> автоматически настраивает все bean-компоненты или классы необходимые для web-приложения.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_boot_cli">Spring Boot CLI</h5>
<div class="paragraph">
<p><strong>Spring Boot CLI</strong> (<strong>Command Line Interface</strong>) — это интерфейс командной строки для приложений на основе <strong>Spring Boot</strong>. Он позволяет запустить приложение Spring Boot с помощью CLI. Он также используется для тестирования приложений Spring Boot из командной строки. Используя интерфейс командной строки Spring Boot, также можно выполнять Groovy код, который имеет аналогичный синтаксис, подобный Java.</p>
</div>
<div class="paragraph">
<p>При запуске некоторых приложений <strong>Spring Boot</strong> через <strong>CLI</strong> он под капотом использует компоненты <strong>Spring Boot Starter</strong> и <strong>Spring Boot AutoConfiguration</strong> для решения всех зависимостей и запуску приложения.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_boot_actuator">Spring Boot Actuator</h5>
<div class="paragraph">
<p><strong>Spring Boot Actuator</strong> также является важным компонентом <strong>Spring Boot</strong>. Он также разрабатывается как подпроект (инструмент) Spring Boot. Он предоставляет множество функций для среды Spring Boot, но в основном отвечает за две его основные функции:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Он предоставляет (HTTP) EndPoints для управления (HTTP) для приложения на Spring Boot.</p>
</li>
<li>
<p>Он позволяет управлять работающим приложениям с помощью этих HTTP EndPoints.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Spring Boot Actuator</strong> автоматически предоставляет имя хоста как <code>localhost</code> и номер порта как <code>8080</code> всякий раз, когда развертывается приложение Spring Boot с помощью интерфейса командной строки Spring Boot. Здесь обычно используются HTTP-методы GET или POST для взаимодействия с HTTP EndPoints по средствам <strong>Spring Boot Actuator</strong>.</p>
</div>
<div class="paragraph">
<p>Spring Boot Actuator в основном используется для доступа к внутренней информации приложения, такой как metrics (метрики), dump (дамп), health (работоспособность) и т.д.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_initializr">Spring Initializr</h5>
<div class="paragraph">
<p><strong>Spring Initializr</strong> — это веб-интерфейс для создания, настройки и создания приложений на базе Spring. Другими словами, это инструмент, который используется для быстрого создания проекта на основе JVM. Он может создавать проекты на различных языках, таких как Java, Kotlin и Groovy. Он также предоставляет скрипт (<strong>Maven</strong> или <strong>Gradle</strong>) для создания приложений.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spring_boot_ides">Spring Boot IDEs</h5>
<div class="paragraph">
<p><strong>Spring Boot</strong> поддерживает множество <strong>IDE</strong>, таких, как <strong>Eclipse</strong>, <strong>IntelliJ IDEA</strong>, <strong>Spring Tool Suite</strong> (<strong>STS</strong>) и т.д., которые используются для создания приложений.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_преимущества_spring_boot">Преимущества Spring Boot</h4>
<div class="paragraph">
<p>Основное преимущество Spring Boot заключается в том, что он состоит из фреймворка Spring и Embedded HTTP server. Но конфигурации на основе XML и аннотаций почти нет.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../assets/img/java/spring/boot/advantages.png" alt="advantages">
</div>
</div>
<div class="paragraph">
<p>Другие преимущества среды Spring Boot приведены ниже:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>С ним легко разрабатывать приложения на основе Spring с помощью Groovy и Java.</p>
</li>
<li>
<p>Он повышает производительность и сокращает время разработки, поскольку большинство вещей управляются по умолчанию.</p>
</li>
<li>
<p>Он сводит к минимуму написание типичного длинного кода, такого как конфигурация на основе XML и аннотаций.</p>
</li>
<li>
<p>Он делает простой и плавной интеграцию Spring Boot с другими экосистемами, такими как Spring Security, Spring Data, Spring JDBC и ORM.</p>
</li>
<li>
<p>Он также предоставляет встроенные HTTP-серверы, такие, как <strong>Apache Tomcat</strong>, <strong>Apache Jetty</strong>, сервер приложений <strong>Undertow</strong> и многие другие, для развертывания и тестирования приложений на основе Spring.</p>
</li>
<li>
<p>Он также предлагает несколько плагинов для простой разработки и тестирования приложений Spring Boot с использованием инструментов сборки, таких как Maven.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_ограничения_spring_boot">Ограничения Spring Boot</h4>
<div class="paragraph">
<p>Некоторые из ограничений Spring Boot перечислены ниже:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Он содержит некоторые дополнительные зависимости, которые могут быть бесполезны для конкретного приложения, поскольку используется <strong>Spring Boot Starters</strong> (root dependencies).</p>
</li>
<li>
<p>Ненужные зависимости, используемые в приложениях, приводят к огромному размеру приложения.</p>
</li>
<li>
<p>Преобразование приложений на <strong>Spring Framework</strong> в приложения на <strong>Spring Boot</strong> занимает немного времени.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_features">Spring Boot Features</h3>
<div class="paragraph">
<p><strong>Spring Boot</strong> построена на основе <strong>Spring Framework</strong>. Фактически он является улучшенной версией проекта <strong>Spring</strong>, поэтому он способен делать то, что не может сделать <strong>Spring Framework</strong>.</p>
</div>
<div class="paragraph">
<p>Ключевые особенности среды <strong>Spring Boot</strong> перечислены ниже:</p>
</div>
<div class="paragraph">
<div class="title">Features of Spring Boot</div>
<p><span class="image"><img src="../../assets/img/java/spring/boot/features.png" alt="features"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>SpringApplication</p>
</li>
<li>
<p>Lazy Initialization</p>
</li>
<li>
<p>Admin Features</p>
</li>
<li>
<p>Security</p>
</li>
<li>
<p>Logging</p>
</li>
<li>
<p>Caching</p>
</li>
<li>
<p>Kotlin Support</p>
</li>
<li>
<p>Validation</p>
</li>
<li>
<p>JSON</p>
</li>
<li>
<p>Testing</p>
</li>
<li>
<p>Task Execution and Scheduling</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_springapplication">SpringApplication</h4>
<div class="paragraph">
<p>Класс <code>SpringApplication</code> в основном используется для начальной загрузки и запуска приложения Spring с использованием <code>main()</code> метода. В некоторых случаях можно использовать статический метод <code>SpringApplication.run()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyFirstSpringApp {
    public static void main(String[] args) {
           SpringApplication.run(MyFirstSpringApp.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>По умолчанию в logs отображаются информация о запуске Spring приложения. Эти logs о запуске можно отключить, установив для <code>spring.main.log-startup-info</code> значение <code>false</code> в <code>application.properties</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_lazy_initialization">Lazy Initialization</h4>
<div class="paragraph">
<p>В Spring Boot <code>SpringApplication</code> помогает lazy (отложенной/ленивой) инициализации Spring приложений. После включения lazy (отложенной/ленивой) инициализации bean-компоненты создаются по мере необходимости, а не во время запуска приложения, что приводит к более быстрому старту приложения. При включении lazy (отложенной/ленивой) инициализации в веб-приложении некоторые веб-компоненты не инициализируются до тех пор, пока не будет получен HTTP-запрос.</p>
</div>
<div class="paragraph">
<p>Включить lazy (отложенной/ленивой) инициализацию тремя способами:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>С помощью метода <code>lazyInitialization()</code> класса <code>SpringApplicationBuilder</code>.</p>
</li>
<li>
<p>С помощью метода <code>setLazyInitialization()</code> класса <code>SpringApplication</code>.</p>
</li>
<li>
<p>С помощью свойства <code>spring.main.lazy-initialization=true</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_admin_features">Admin Features</h4>
<div class="paragraph">
<p>В Spring Boot можно включить функции, связанные с администрированием, указав свойство <code>spring.application.admin.enabled=true</code>. Это позволит использовать задействовать интерфейс <code>SpringApplicationAdminMXBean</code> на платформе <code>MBeanServer</code> . Он используется для реализации wrapper services (служб-оболочек), а также для администрирования Spring Boot приложений.</p>
</div>
</div>
<div class="sect3">
<h4 id="_security">Security</h4>
<div class="paragraph">
<p><strong>Spring Boot</strong> приложения — это приложения на основе Spring. Поэтому Spring Boot приложения очень безопасны и основаны на стратегиях безопасности Spring. Аннотация <code>@EnableGlobalMethodSecurity</code> используется для добавления безопасности на уровне метода в веб-приложение.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logging">Logging</h4>
<div class="paragraph">
<p><strong>Spring Boot</strong> использует <strong>Commons-logging</strong> для всех внутренних logs, который представляет собой Java-based programming model service для logging и других наборов инструментов. Некоторые конфигурации по умолчанию также предоставляются для <strong>Log4J2</strong>, <strong>Logback</strong> и <strong>Java Util Logging</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_caching">Caching</h4>
<div class="paragraph">
<p><strong>Кэширование</strong> поддерживается Spring Boot. Кэширование также применяется и к методам приложений, что приводит к уменьшению количества выполнений на основе информации, доступной в кеше. Spring Boot автоматически настраивает кэш, а поддержка кэширования включается с помощью аннотации <code>@EnableCaching</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_kotlin_support">Kotlin Support</h4>
<div class="paragraph">
<p><strong>Kotlin</strong> — это язык программирования, используемый для Android, серверной, мобильной кроссплатформенной и веб-разработки. Он предназначен для JVM и других платформ, которые позволяют писать короткий и простой код, обеспечивая при этом взаимодействие с другими существующими библиотеками Java.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validation">Validation</h4>
<div class="paragraph">
<p>Validation (валидация) автоматически поддерживается Spring Boot. Spring Boot позволяет аннотировать методы bean-компонента ограничением <code>javax.validation</code> для их полей и возвращаемых значений. Целевые классы аннотируются аннотацией <code>@Validated</code> и просматриваются validator (валидатором) при validation (валидации).</p>
</div>
</div>
<div class="sect3">
<h4 id="_json">JSON</h4>
<div class="paragraph">
<p>Spring Boot предлагает интеграцию с тремя основными библиотеками для JSON mapping:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Jackson</strong><br>
<strong>Jackson</strong> — это библиотека JSON по умолчанию и наиболее предпочтительная. Входит в стартер <code>spring-boot-starter-json</code>. Конфигурация <strong>Jackson</strong> предоставляется по умолчанию. Компонент <code>ObjectMapper</code> настраивается автоматически, когда <strong>Jackson</strong> находится в classpath. Он также предлагает несколько свойств конфигурации для настройки конфигурации <code>ObjectMapper</code>.</p>
</li>
<li>
<p><strong>Gson</strong><br>
Конфигурация <strong>Gson</strong> предоставляется по умолчанию. Поэтому он автоматически настраивается, когда <strong>Gson</strong> находится в classpath. Существует несколько свойств конфигурации <code>spring.gson.*</code> для изменения конфигураций. Так же для управления конфигурациями используется компонент <code>GsonBuilderCustomizer</code>.</p>
</li>
<li>
<p><strong>JSON-B</strong><br>
Автоматическая настройка для <strong>JSON-B</strong> также предоставляется по умолчанию. Компонент <strong>JSON-B</strong> настраивается автоматически, когда API для JSON-B и его реализация находятся в classpath.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_testing">Testing</h4>
<div class="paragraph">
<p><strong>Spring Boot</strong> предоставляет множество утилит и аннотаций, помогающих тестировать приложения. Есть два модуля, которые обеспечивают поддержку тестирования:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring-boot-test</code> - содержит все основные элементы,</p>
</li>
<li>
<p><code>spring-boot-test-autoconfigure</code> - поддерживает автоматическую настройку для тестов.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_task_execution_and_scheduling">Task Execution and Scheduling</h4>
<div class="paragraph">
<p>Если компонент <code>Executor</code> отсутствует в контексте, Spring Boot автоматически настраивает <code>ThreadPoolTaskExecutor</code>. В зависимости от цели можно изменить bean-компонент <code>Executor</code> на <code>ThreadPoolTaskExecutor</code> или определить как <code>ThreadPoolTaskExecutor</code>, так и <code>AsyncConfiguration</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_architecture">Spring Boot Architecture</h3>
<div class="paragraph">
<p><strong>Spring Boot</strong> — это расширенная версия или проект <strong>Spring Framework</strong>. Наряду с <strong>Spring Framework</strong> он также состоит из third-party libraries (сторонних библиотек) и Embedded HTTP servers. Он легко создает готовые к работе, менее трудоемкие и автономные приложения на основе <strong>Spring Framework</strong>.</p>
</div>
<div class="paragraph">
<p>Цель <strong>Spring Boot</strong> — полностью отказаться от использования конфигурации на основе XML и аннотаций в приложениях. Используя <strong>Spring Boot</strong>, можно создать приложение с минимальными усилиями (меньше времени и усилий). По умолчанию он предлагает большинство вещей, необходимых для разработки.</p>
</div>
<div class="paragraph">
<p><strong>Spring Boot</strong> следует многоуровневой архитектуре и состоит из четырех слоев, как показано ниже.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Presentation Layer</strong></p>
</li>
<li>
<p><strong>Business Layer</strong></p>
</li>
<li>
<p><strong>Persistence Layer</strong></p>
</li>
<li>
<p><strong>Database Layer</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../../assets/img/java/spring/boot/architecture-1.png" alt="architecture 1">
</div>
<div class="title">Figure 1. Spring Boot Architecture</div>
</div>
<div class="paragraph">
<p>На приведенной выше диаграмме показано, что каждый уровень архитектуры напрямую взаимодействует с уровнем, расположенным чуть выше или ниже него, благодаря workflow (рабочему процессу). Это означает, что каждый уровень зависит только от соседнего с ним уровня, поэтому, если изменяется API (не реализация этого API) одного уровня, то просто нужно обновить смежные с ним слои.</p>
</div>
<div class="paragraph">
<p>Краткое описание слоев приведено ниже.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Presentation layer</strong><br>
Это front layer или верхний слой архитектуры, так как он состоит из views (представлений). Он используется для преобразования полей JSON в объекты и наоборот, а также обрабатывает аутентификацию и HTTP запросы. После завершения аутентификации он передает ее на business layer (бизнес-уровень) для дальнейшей обработки.</p>
</li>
<li>
<p><strong>Business Layer</strong><br>
Обрабатывает всю бизнес-логику, а также выполняет validation и authorization, поскольку является частью бизнес-логики. Например, только администраторы могут изменять учетную запись пользователя.</p>
</li>
<li>
<p><strong>Persistence Layer</strong><br>
Содержит всю логику хранилища, например, запросы к базе данных приложения. Он также переводит бизнес-объекты из/в записи в базе данных.</p>
</li>
<li>
<p><strong>Database Layer</strong><br>
Уровень базы данных состоит из базы данных, такой как <strong>MariaDB</strong>, <strong>PostgreSQL</strong>, <strong>MongoDB</strong> и т.д. Он может содержать несколько баз данных. Все операции, связанные с базой данных, такие как CRUD (создание, чтение/извлечение, обновление и удаление), выполняются на этом уровне.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Реализация вышеописанной многоуровневой архитектуры выполняется таким образом:</p>
</div>
<div class="paragraph">
<p>HTTP-запросы или веб-запросы обрабатываются Controllers на presentation layer, services контролируют business logic, а repositories обрабатывают persistence (логику хранения). Controller может использовать несколько services, service может использовать несколько repositories, а репозиторий может использовать несколько баз данных.</p>
</div>
<div class="sect3">
<h4 id="_spring_boot_workflow">Spring Boot Workflow</h4>
<div class="paragraph">
<p>Архитектура Spring Boot основана на <strong>Spring Framework</strong>. Таким образом, он в основном использует все функции и модули Spring-подобных <strong>Spring MVC</strong>, <strong>Spring Core</strong> и т.д., за исключением того, что нет необходимости в классах <strong>DAO</strong> и <strong>DAOImpl</strong>.</p>
</div>
<div class="paragraph">
<p>На следующей диаграмме показан workflow Spring Boot.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../assets/img/java/spring/boot/architecture-2.png" alt="architecture 2">
</div>
<div class="title">Figure 2. Spring Boot Architecture</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Клиент делает HTTP-запрос (GET или POST).</p>
</li>
<li>
<p>Запрос пересылается Controller, который сопоставляет запрос и обрабатывает его. При необходимости он также вызывает логику Service.</p>
</li>
<li>
<p>Бизнес-логика выполняется на уровне Service, а логика выполняется с данными из базы данных, которые сопоставляются с Model или Entity class по средствам JPA.</p>
</li>
<li>
<p>Страница JSP возвращается в качестве ответа клиенту, если не произошло ошибки.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-28 07:48:31 UTC
</div>
</div>
</body>
</html>